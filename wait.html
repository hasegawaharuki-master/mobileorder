<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>待機中のニックネーム</title>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBi4R5J3DfW8xBXbM9cjSmQ_Ycwlzr76W4",
            authDomain: "test2-802ce.firebaseapp.com",
            databaseURL: "https://test2-802ce-default-rtdb.firebaseio.com",
            projectId: "test2-802ce",
            storageBucket: "test2-802ce.appspot.com",
            messagingSenderId: "624514936023",
            appId: "1:624514936023:web:cbbd8f7a89450b86e8d492",
            measurementId: "G-5H39DWSK3Y"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const waitingUsersRef = ref(database, "waiting_users");

        document.addEventListener("DOMContentLoaded", () => {
            const waitingContainer = document.getElementById("waiting-container");

            onValue(waitingUsersRef, (snapshot) => {
                const users = snapshot.val();
                waitingContainer.innerHTML = ""; // 一度クリア

                if (users) {
                    Object.values(users).forEach(({ nickname }) => {
                        const userDiv = document.createElement("div");
                        userDiv.textContent = nickname;
                        waitingContainer.appendChild(userDiv);
                    });
                } else {
                    waitingContainer.textContent = "現在、待機中のニックネームはありません。";
                }
            });
        });
    </script>
</head>
<body>
    <h1>待機中のニックネーム</h1>
    <div id="waiting-container">
        <!-- ここに待機中のニックネームが表示される -->
    </div>
</body>
</html>
